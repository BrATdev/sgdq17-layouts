<link rel="import" href="../../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../../bower_components/iron-icons/editor-icons.html">
<link rel="import" href="../../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../../../bower_components/paper-toast/paper-toast.html">
<link rel="import" href="../../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../dragula-element/dragula-element.html">
<link rel="import" href="../gdq-tweet/gdq-tweet.html">

<dom-module id="gdq-interview-tier2">
	<template>
		<style include="dragula-styles iron-flex iron-flex-alignment">
			:host {
				padding: 8px;
				font-family: "Roboto", sans-serif;
				background-color: #424242;
				@apply --layout-vertical;
			}

			#endInterview,
			#showNext {
				width: 300px;
				height: 43px;
				margin: 0 7px;
				white-space: nowrap;
			}

			#hideQuestion,
			#endInterview {
				--paper-button: {
					background-color: #C9513E;
				};
			}

			#showNext,
			#showQuestion {
				--paper-button: {
					background-color: #5BA664;
				};
			}

			#showQuestion,
			#hideQuestion,
			#autoQuestion {
				width: 160px;
				height: 35px;
				margin: 0 9px;
			}

			#autoQuestion {
				--paper-button: {
					background-color: #645BA6;
				}
			}

			#list {
				margin-top: 14px;
				padding: 0 10px;
				box-sizing: border-box;
				overflow-y: scroll;
				@apply --layout-vertical;
			}

			#approvedQuestionsHeader {
				text-transform: uppercase;
				padding-left: 9px;
				font-weight: bold;
				font-size: 24px;
				margin-top: 15px;
			}

			.tweet {
				margin: 4px 0;
				padding-left: 0;
				padding-right: 6px;
				padding-top: 5px;
				padding-bottom: 7px;
				background-color: #9966cc;
				box-sizing: border-box;
				box-shadow:
					0 2px 2px 0 rgba(0, 0, 0, 0.14),
					0 1px 5px 0 rgba(0, 0, 0, 0.12),
					0 3px 1px -2px rgba(0, 0, 0, 0.2);
				@apply --layout-horizontal;
			}

			.tweet-content {
				@apply --layout-flex;
			}

			.tweet-handle {
				position: relative;
				width: 50px;
				border-right: 1px solid black;
				cursor: move;
				@apply --layout-flex-none;
				@apply --layout-vertical;
				@apply --layout-center-center;
			}

			.tweet-buttons {
				width: 52px;
				@apply --layout-horizontal;
				@apply --layout-center-center;
			}

			.tweet-buttons paper-button {
				width: 46px;
				height: 46px;
				min-width: 46px;
				margin-right: 0;
				@apply --layout-horizontal;
				@apply --layout-center-center;
			}

			.tweet-buttons-reject {
				--paper-button: {
					background-color: #C9513E;
				};
			}

			.bg-color-transition {
				transition: background-color 1600ms cubic-bezier(0.455, 0.03, 0.515, 0.955);
			}

			iron-icon {
				--iron-icon-height: 46px;
				--iron-icon-width: 46px;
			}

			paper-button {
				color: white;
				font-weight: bold;
			}

			#endInterviewDialog paper-button {
				color: #00bebe;
			}

			.frame {
				border: 1px solid black;
				box-sizing: border-box;
				@apply --layout-vertical;
			}

			.frame-title {
				background-color: #C4C4C4;
				font-style: normal;
				font-weight: bold;
				font-size: 18px;
				color: black;
				height: 29px;
				text-transform: uppercase;
				@apply --layout-horizontal;
				@apply --layout-center-center;
			}
		</style>

		<div class="frame" style="margin-bottom: 4px;">
			<div class="frame-title">Interview Graphic</div>
		</div>

		<div class="frame flex" style="background-color: #BAC1C3;">
			<div class="frame-title" style="background-color: #8f9496; margin-bottom: 14px;">Lightning Round</div>

			<div class="layout horizontal center-center">
				<paper-button id="endInterview" raised on-tap="openEndInterviewDialog">End Interview (Clear Questions)</paper-button>
				<paper-button id="showNext" raised on-tap="showNextQuestion">Load Next Approved Question</paper-button>
			</div>

			<div id="approvedQuestionsHeader">APPROVED QUESTIONS</div>

			<div id="placeholder" hidden="[[onScreenTweet]]">
				There are no Twitter questions currently approved for use.
			</div>

			<div class="layout horizontal center-center">
				<paper-button id="showQuestion" raised on-tap="showQuestion" disabled="[[_questionShowingVal]]">
					Show
				</paper-button>

				<paper-button id="hideQuestion" raised on-tap="hideQuestion" disabled="[[!_questionShowingVal]]">
					Hide
				</paper-button>

				<paper-button id="autoQuestion" raised on-tap="autoQuestion" disabled="[[_questionShowingVal]]">
					Auto
				</paper-button>
			</div>

			<dragula-element
				id="list"
				container-class="container"
				handle-class="tweet-handle"
				on-dragula-dragend="_handleDragEnd">
				<div class="container">
					<template
						id="repeat"
						is="dom-repeat"
						items="[[replies]]"
						as="reply"
						sort="mapSort">
						<div class="tweet bg-color-transition" tweet-id="[[reply.id_str]]">
							<div class="tweet-handle">
								<iron-icon
									style="pointer-events: none;"
									icon="editor:drag-handle"></iron-icon>
							</div>

							<gdq-tweet class="tweet-content" tweet="[[reply]]"></gdq-tweet>

							<div class="tweet-buttons">
								<paper-button
									class="tweet-buttons-reject"
									raised
									on-tap="reject"
									alt="Reject">
									<iron-icon icon="delete-forever"></iron-icon>
								</paper-button>
								<!--<paper-button
									raised
									on-tap="promote"
									alt="Promote"
									disabled="[[calcPromoteDisabled(reply, _sortMapVal)]]">
									<iron-icon icon="arrow-drop-up"></iron-icon>
								</paper-button>

								<paper-button
									raised
									on-tap="demote"
									alt="Demote"
									disabled="[[calcDemoteDisabled(reply, _sortMapVal)]]">
									<iron-icon icon="arrow-drop-down"></iron-icon>
								</paper-button>-->
							</div>
						</div>
					</template>
				</div>
			</dragula-element>
		</div>

		<paper-dialog id="endInterviewDialog">
			<h2>End Interview</h2>
			<p>Are you sure you wish to end this interview?</p>
			<p>This will clear the current "prompt" tweet and prepare the interface for the next set of questions.</p>
			<div class="buttons">
				<paper-button dialog-dismiss>Cancel</paper-button>
				<paper-button dialog-confirm autofocus on-tap="endInterview">Accept</paper-button>
			</div>
		</paper-dialog>

		<paper-toast id="errorToast"></paper-toast>
	</template>

	<script src="gdq-interview-tier2.js"></script>
</dom-module>
