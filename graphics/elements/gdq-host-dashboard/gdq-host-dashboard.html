<link rel="import" href="../../../bower_components/font-roboto/roboto.html">
<link rel="import" href="../../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../../bower_components/iron-list/iron-list.html">
<link rel="import" href="../../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../../bower_components/paper-progress/paper-progress.html">
<link rel="import" href="../../../bower_components/paper-styles/shadow.html">
<link rel="import" href="../../../bower_components/polymer/lib/mixins/mutable-data.html">
<link rel="import" href="../../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../../shared/elements/gdq-rundown/gdq-rundown.html">
<link rel="import" href="gdq-host-dashboard-ads.html">
<link rel="import" href="gdq-host-dashboard-bid.html">

<dom-module id="gdq-host-dashboard">
	<template>
		<style include="iron-flex iron-flex-alignment">
			:host {
				position: absolute;
				top: 0;
				left: 0;
				overflow: hidden;
				width: 1920px;
				height: 1080px;
				display: block;
				font-family: Roboto, sans-serif;
				color: #000000;
				padding: 24px 34px 50px 34px;
				box-sizing: border-box;
				@apply --layout-vertical;
			}

			::-webkit-scrollbar {
				width: 12px;
			}

			::-webkit-scrollbar-thumb {
				border-radius: 6px;
				background-color: #707070;
			}

			#header {
				font-size: 36px;
				font-weight: 700;
				line-height: 43px;
				text-transform: uppercase;
				margin-bottom: 9px;
				@apply --layout-flex-none;
				@apply --layout-horizontal;
				@apply --layout-justified;
			}

			#gridWrapper {
				display: grid;
				grid-template-columns: repeat(3, 422px) auto;
				grid-template-rows: 147px 387px auto;
				grid-gap: 10px;
			}

			#total {
				grid-column: 1;
				grid-row: 1;
				font-size: 72px;
				font-weight: 700;
				line-height: 43px;
				@apply --layout-vertical;
				@apply --layout-center-center;
			}

			.header {
				margin-top: 11px;
				height: 54px;
				background-color: rgba(215, 215, 215, 0.55);
				font-size: 24px;
				font-weight: 700;
				text-transform: uppercase;
				@apply --layout-vertical;
				@apply --layout-center-center;
			}

			#prizes {
				grid-column: 1;
				grid-row: 2 / 4;
				flex-grow: 1;
				@apply --layout-flex;
			}

			#prizes-list {
				height: 721px;
				padding: 0 14px;
				margin-top: 13px;
				margin-right: 11px;
			}

			.prize {
				padding-bottom: 10px;
				font-size: 36px;
				font-weight: 400;
				line-height: 43px;
			}

			.prize .material {
				padding: 19px;
				border: 1px solid #d2d2d2;
			}

			.prize:first-of-type {
				padding-top: 4px;
			}

			.material {
				background-color: white;
				@apply --shadow-elevation-2dp;
			}

			#metroid {
				grid-column: 2 / 4;
				grid-row: 1;
				box-sizing: border-box;
				@apply --layout-vertical;
			}

			#metroid-state {
				height: 32px;
				margin: 0 167px;
				font-size: 18px;
				@apply --shadow-elevation-2dp;
				@apply --layout-horizontal;
				@apply --layout-center-center;
			}

			#metroid-results {
				@apply --layout-flex;
				@apply --layout-horizontal;
			}

			#metroid-kill {
				text-align: right;
			}

			.metroid-category {
				width: 50%;
				font-size: 30px;
				font-weight: 300;
				line-height: 43px;
				text-transform: uppercase;
				padding: 4px 16px 0 16px;
				@apply --layout-center-justified;
				@apply --layout-vertical;
			}

			.metroid-category[ahead] {
				font-size: 30px;
				font-weight: 900;
				background-color: rgba(168, 255, 168, 0.55);
			}

			.metroid-category-name {
				margin-bottom: -9px;
			}

			.metroid-category-ahead {
				font-size: 18px;
				font-weight: 400;
				text-transform: none;
			}

			#bids {
				grid-column: 2;
				grid-row: 2 / 4;
				box-sizing: border-box;
			}

			#bids-cooldown {
				width: 100%;
				box-sizing: border-box;
				--paper-progress-active-color: #8560a8;
				--paper-progress-transition-timing-function: linear;
				--paper-progress-transition-duration: 60s;
				--paper-progress-indeterminate-cycle-duration: 2.5s;
				--paper-progress-height: 11px;
				--paper-progress-container-color: white;
			}

			#bids-filter {
				padding-left: 12px;
				padding-right: 24px;

				--paper-input-container-input: {
					font-weight: 400;
				};

				--paper-input-container-label: {
					font-weight: 400;
				};

				--paper-input-container-label-focus: {
					color: #8560a8
				};

				--paper-input-container-underline: {
					position: relative;
					top: 2px;
					border-bottom: 3px solid #8560a8;
				};

				--paper-input-container-underline-focus: {
					top: 2px;
					border-bottom: 3px solid #C693F2;
				}
			}

			#bids-list {
				height: 635px;
				padding: 0 14px;
				margin-top: 13px;
				margin-right: 11px;
			}

			#ads {
				grid-column: 3;
				grid-row: 2 / 4;
			}

			#schedule {
				grid-column: 4;
				grid-row: 2;
				padding: 11px;
				@apply --layout-vertical;
			}

			#checklistStatus {
				width: 100%;
				height: 49px;
				font-size: 36px;
				font-weight: 500;
				text-transform: uppercase;
				@apply --layout-vertical;
				@apply --layout-center-center;
			}

			#stopwatch {
				text-align: center;
				font-variant-numeric: tabular-nums;
				-moz-font-feature-settings: "tnum";
				-webkit-font-feature-settings: "tnum";
				font-feature-settings: "tnum";
			}

			#stopwatch-time {
				font-size: 100px;
				font-weight: 700;
			}

			#stopwatch-results {
				height: 93px;
				@apply --layout-horizontal;
				@apply --layout-center;
				@apply --layout-around-justified;
			}

			.result {
				width: 120px;
			}

			.result:not([display]) {
				display: none;
			}

			.result-time {
				font-size: 24px;
				font-weight: 400;
			}

			.result-name {
				font-size: 18px;
				font-weight: 400;
				overflow: hidden;
				white-space: nowrap;
				text-overflow: ellipsis;
			}

			#currentRun {
				text-align: center;
			}

			#currentRun-name {
				font-size: 36px;
				font-weight: 500;
				line-height: 43px;
				margin-bottom: 12px;
			}

			#currentRun-runners {
				font-size: 22px;
				font-weight: 400;
				overflow: hidden;
				white-space: nowrap;
				text-overflow: ellipsis;
			}

			#rundown {
				grid-column: 4;
				grid-row: 3;
			}
		</style>

		<div id="header">
			<div>[[currentTime]] -- [[elapsedTime]]</div>
			<div>SUMMER GAMES DONE QUICK 2017</div>
		</div>

		<div id="gridWrapper">
			<div id="total" class="material">[[total]]</div>

			<div id="prizes" class="material">
				<div class="header">PRIZES CURRENTLY AVAILABLE</div>
				<iron-list id="prizes-list" items="[[prizes]]" as="prize">
					<template>
						<div class="prize">
							<div class="material">
								<div id="prize-[[prize.id]]">[[prize.description]]</div>
								<div>[[prize.minimumbid]]</div>
							</div>
						</div>
					</template>
				</iron-list>
			</div>

			<div id="metroid">
				<div id="metroid-state">[[calcMetroidStateText(metroidBid.state)]]</div>

				<div id="metroid-results" class="material">
					<div id="metroid-save" class="metroid-category">
						<div class="metroid-category-name">SAVE THE ANIMALS</div>
						<div class="layout horizontal center justified">
							<div>[[saveTheAnimalsTotal.formatted]]</div>
							<div class="metroid-category-ahead">
								[[calcMetroidAheadText('save', saveTheAnimalsTotal, killTheAnimalsTotal)]]
							</div>
						</div>
					</div>
					<div id="metroid-kill" class="metroid-category">
						<div class="metroid-category-name">KILL THE ANIMALS</div>
						<div class="layout horizontal center justified">
							<div class="metroid-category-ahead">
								[[calcMetroidAheadText('kill', saveTheAnimalsTotal, killTheAnimalsTotal)]]
							</div>
							<div>[[killTheAnimalsTotal.formatted]]</div>
						</div>
					</div>
				</div>
			</div>

			<div id="bids" class="material">
				<paper-progress id="bids-cooldown" indeterminate></paper-progress>

				<div class="header" style="margin-top: 0;">Incentive & Bid Wars</div>

				<paper-input
					id="bids-filter"
					label="Filter"
					placeholder="Type in filter here"
					value="{{bidFilterString}}">
				</paper-input>
				<iron-list id="bids-list" items="[[calcBids(relevantBids, bidFilterString)]]" as="bid" filter="bidsFilter">
					<template>
						<gdq-host-dashboard-bid bid="[[bid]]"></gdq-host-dashboard-bid>
					</template>
				</iron-list>
			</div>

			<gdq-host-dashboard-ads id="ads" class="material"></gdq-host-dashboard-ads>

			<div id="schedule" class="material">
				<div id="checklistStatus"></div>

				<div id="stopwatch">
					<div id="stopwatch-time">[[stopwatchTime]]</div>
					<div 1id="stopwatch-results">
						<template is="dom-repeat" items="[[stopwatchResults]]" as="result">
							<div class="result" display$="[[isValidResult(result, index, runners)]]">
								<div class="result-time">[[result.formatted]]</div>
								<div class="result-name" title="[[calcRunnerName(runners, index)]]">
									[[calcRunnerName(runners, index)]]
								</div>
							</div>
						</template>
					</div>
				</div>

				<div id="currentRun">
					<div id="currentRun-name"></div>
					<div id="currentRun-runners">[[calcRunnersString(runners)]]</div>
				</div>
			</div>

			<gdq-rundown id="rundown" class="material"></gdq-rundown>
		</div>
	</template>

	<script src="gdq-host-dashboard.js"></script>
</dom-module>
